# PhotoLab

<img width="1100" src="https://user-images.githubusercontent.com/8450091/205468402-4240ad49-1449-4882-96a7-e27d9ec446b7.png">

| Anime Style                                                                                                                  | Interactive Colorization                                                                                                     |
| ---------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------- |
| <img width="500" src="https://user-images.githubusercontent.com/8450091/205465788-86902f1a-0953-4f3b-8c7a-4d4f2dc25713.jpg"> | <img width="500" src="https://user-images.githubusercontent.com/8450091/205465819-58834a02-a437-4b47-93c8-ff3f3fc0672b.png"> |

| Portrait Mode                                                                                                                | Grayscale Background                                                                                                         |
| ---------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------- |
| <img width="500" src="https://user-images.githubusercontent.com/8450091/205465880-b9549d26-aaf7-46dc-967f-d79148ac1f03.jpg"> | <img width="500" src="https://user-images.githubusercontent.com/8450091/205465881-fb1a61c7-734c-4c7d-b11c-edb14bf2deaa.jpg"> |

| Super-Resolution                                                                                                              |
| ----------------------------------------------------------------------------------------------------------------------------- |
| <img width="1100" src="https://user-images.githubusercontent.com/8450091/205465965-6dc7cb45-d69d-4cd5-a7b0-f14f824a1227.jpg"> |

| White Balance Correction                                                                                                      |
| ----------------------------------------------------------------------------------------------------------------------------- |
| <img width="1100" src="https://user-images.githubusercontent.com/8450091/205467129-64a3fad4-c4c6-4578-ba07-16e79dd94bd3.jpg"> |

| Instagram Filters                                                                                                            | Bezier Curves and Selective Editing                                                                                          |
| ---------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------- |
| <img width="500" src="https://user-images.githubusercontent.com/8450091/205467832-fd167e86-6b26-4d61-9fc8-bfd3ae5851cf.png"> | <img width="500" src="https://user-images.githubusercontent.com/8450091/205506806-c99a64d5-c34b-470d-adbf-11de2f6790a5.png"> |

| Spot Removal                                                                                                                  | Exposure Adjustment                                                                                                          |
| ----------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------- |
| <img width="500" src="https://user-images.githubusercontent.com/8450091/205468098-5fadd963-6c4e-4b1c-b430-4e989dab6fff.jpeg"> | <img width="500" src="https://user-images.githubusercontent.com/8450091/205470366-d85543ce-8d4a-4f02-926d-df1df0c4c07f.png"> |

## Quick Start

Download the requirements file first inside the PhotoLab, and also download some extra packages:

```console
pip install PyQt6
pip install pyqtgraph
pip install panda3d
```

Download the pretrained models by running the included download script:

```console
foo:bar$ python download_models.py
```

Start the editor by running:

```console
foo:bar$ python src/main.py
```

If you face any issue relate to "qt.qpa.plugin: Could not find the Qt platform plugin "cocoa" in ""
This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem", here is several methods you could try to figure it out:

First, try reinstall PyQt6 PyQt6-Qt6 packages:

```console
pip install --force-reinstall PyQt6 PyQt6-Qt6
```

Second, set the export route for plugin:

```console
export QT_PLUGIN_PATH="/Users/liqi/anaconda3/lib/python3.12/site-packages/PyQt6/Qt6/plugins"
```

After all these steps, try rerun the "python src/main.py" in your terminal.

## Features

### Basic Tools

- Zoom and Pan
- Color Picker
- Rectangle Select
- Path Select
- Crop
- Paint and Erase
- Exposure and Color Adjustment
- Histogram Viewer
- Curve Editor
- Spot Removal Tool
- Blur Tool
- Rotate Left/Right
- Horizontal/Vertical Stack
- Horizontal/Vertical Flip
- Panorama Image Stitching
- Instagram Filters

### AI Tools

- White Balance Correction
- Background Removal
- Human Segmentation
- Grayscale Background
- Portrait Mode Background Blur
- Interactive Colorization
- Super-Resolution
- Anime Style

## Example Results

| Before                                                                                                                        | After                                                                                                                         |
| ----------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------- |
| <img width="500" src="https://user-images.githubusercontent.com/8450091/205533870-db6586ce-4d9c-4a5e-9a0c-99bcf5d99a93.jpeg"> | <img width="500" src="https://user-images.githubusercontent.com/8450091/205533557-cf381bff-e2f7-453a-8da2-ecd63153824a.jpeg"> |
| <img width="500" src="https://user-images.githubusercontent.com/8450091/205533877-588ed525-b44f-4569-999d-e50c8cad8a40.jpeg"> | <img width="500" src="https://user-images.githubusercontent.com/8450091/205533660-16956642-23ef-416b-9635-7e29cbb5b4a9.jpeg"> |
| <img width="500" src="https://user-images.githubusercontent.com/8450091/205540298-c759f3c9-975d-4b86-bec5-2f15dcb8752e.jpeg"> | <img width="500" src="https://user-images.githubusercontent.com/8450091/205540306-8d488f0e-a5a1-4b47-a016-424ba9f11d22.jpeg"> |
| <img width="500" src="https://user-images.githubusercontent.com/8450091/205551316-8dcc6117-6d90-4dee-8c3d-e0783f3764d1.jpg">  | <img width="500" src="https://user-images.githubusercontent.com/8450091/205551332-7459d85e-da3c-4c70-8c90-7e9eb5c4df29.jpeg"> |
| <img width="500" src="https://user-images.githubusercontent.com/8450091/205547688-d10ec660-9380-4cc5-a03a-4d7dd8028ed1.jpeg"> | <img width="500" src="https://user-images.githubusercontent.com/8450091/205547696-856e3b94-06d8-4136-8190-4ca709d5cd72.jpeg"> |
| <img width="500" src="https://user-images.githubusercontent.com/8450091/205562505-eefa35a6-d628-463d-8e6e-06da7ab45727.jpeg"> | <img width="500" src="https://user-images.githubusercontent.com/8450091/205562513-51c54e32-6458-4ff9-9852-52322309be31.jpeg"> |
| <img width="500" src="https://user-images.githubusercontent.com/8450091/205777410-379c2094-7335-408f-b709-790bccd20727.jpeg"> | <img width="500" src="https://user-images.githubusercontent.com/8450091/205777422-dd64bc79-24ec-4eeb-8359-2de904ec0115.jpeg"> |

## Notes on PyTorch CUDA Support

This project has been testing with `torch==1.11.0+cu113 torchvision-0.12.0+cu113`

```console
foo:bar$ pip install torch==1.11.0+cu113 torchvision==0.12.0+cu113 -f https://download.pytorch.org/whl/torch_stable.html

foo:bar$ python
Python 3.10.8 (tags/v3.10.8:aaaf517, Oct 11 2022, 16:50:30) [MSC v.1933 64 bit (AMD64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import torch
>>> torch.version.cuda
'11.3'
>>> torch.cuda.is_available()
True
```
